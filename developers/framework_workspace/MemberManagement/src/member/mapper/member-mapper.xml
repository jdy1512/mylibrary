<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
    <!-- sql -->
    <sql id="default-select-member">
        select id, password, name, email, join_date from member
    </sql>
    
    <!-- result-map -->
    <resultMap type="member" id="member-map">
        <id column="id" property="id"/>
        <result column="password" property="password"/>
        <result column="name" property="name"/>
        <result column="email" property="email"/>
        <result column="join_date" property="joinDate"/>
    </resultMap>
    
    <!-- select -->
    <select id="selectAllMember" resultMap="member-map">
        <include refid="default-select-member"/>
    </select>
    
    <select id="selectMemberById" parameterType="string" resultMap="member-map">
        <include refid="default-select-member"/>
		where id=#{value}
    </select>
    
    <!-- insert -->
    <insert id="insertMember" parameterType="member">
        insert into member values(#{id}, #{password}, #{name}, #{email}, #{joinDate})
    </insert>
    
    <!-- update -->
    <update id="updateMember" parameterType="member">
        update member
		<set>
		    <if test="password!=null">password=#{password},</if>
		    <if test="name!=null">name=#{name},</if>
		    <if test="email!=null">email=#{email},</if>
		    <if test="joinDate!=null">join_date=#{joinDate}</if>
		</set>
		where id=#{id}
    </update>
    
    <!-- delete -->
    <delete id="deleteMemberById" parameterType="member">
        delete from member
        where id=#{value}
    </delete>
</mapper>
